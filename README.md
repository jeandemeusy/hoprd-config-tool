# hoprd-config-tool


Tool to generate HOPRd identity, configuration, and docker-compose files from a single input where all required data is specified.

## Installation
```bash
➜ pip(3) install (-U) hoprd-config-tool
```

## Usage
To generate the required ressources (identities, configurations and docker-compose files) from a [config file](./.config/network_1.yml), run the following command:

```sh
➜ python -m hoprd-config-tool --params .config/network_1.yml
```

You can specify the root folder where identity and configuration files will be generated by appending the optional parameter `--folder <FOLDER>` which by default is set to `./.hoprd-nodes/`.

Each node configuration is rendered as a TOML file (`hoprd-<network>-<index>.cfg.toml`),
which keeps related settings grouped with native table support.
The generated docker compose file follows the default naming: `docker-compose.yml`

In addition to the per-node files (which are the ones mounted by docker-compose),
the tool now writes a `hoprd-<network>-multi.cfg.toml` document inside the same
`.hopr-configs/<network>` folder. This companion file is a valid TOML config that
contains the shared configuration once (the exact same tables found in the
per-node files) and a `[[nodes]]` array that only lists the attributes that vary
per node: `safe_address`, `module_address`, `node_address`, `node_peer_id`,
`api_password`, `identity_password`, and `identity`.

### Custom Docker networks

If you need the generated compose file to reference custom networks (for example
to attach the services to an existing external network) you can define them in
your configuration file under the `networks` key, using the same syntax as in a
regular `docker-compose.yml` file:

```yaml
networks:
  default:
    name: hoprd-network1
    external: true
```

The contents of this section are copied verbatim into the rendered compose file
and every generated service automatically references all declared networks.
